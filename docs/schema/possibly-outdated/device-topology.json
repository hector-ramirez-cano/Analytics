{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "type": "object",
  "required": ["devices", "links", "groups"],
  "properties": {
    "devices": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["id", "name", "coordinates", "geocoordinates", "management-hostname", "configuration"],
        "properties": {
          "id": {
            "type": "integer"
          },
          "name": {
            "type": "string",
            "minLength": 1
          },
          "coordinates": {
            "type": "array",
            "items": {
              "type": "number"
            },
            "minItems": 2,
            "maxItems": 2
          },
          "geocoordinates": {
            "type": "array",
            "items": [
              {
                "type": "number",
                "minimum": -90,
                "maximum": 90
              },
              {
                "type": "number",
                "minimum": -180,
                "maximum": 180
              }
            ],
            "minItems": 2,
            "maxItems": 2
          },

          "management-hostname": {
            "type": "string",
            "format": "ipv4"
          },
          "configuration": {
            "type": "object",
            "required": ["available-values", "requested-metadata", "requested-metrics", "data-sources"],
            "properties": {
              "available-values": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "requested-metadata": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "requested-metrics": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "data-sources": {
                "type": "array",
                "items": {
                  "type": "string",
                  "enum": ["icmp", "ssh", "snmp"]
                },
                "minItems": 1
              }
            }
          }
        }
      }
    },
    "links": {
      "type": "array",
      "items": {
        "type": "object",
        "required": [
          "id",
          "side-a",
          "side-b",
          "link-type",
          "side-a-iface",
          "side-b-iface"
        ],
        "properties": {
          "id": {
            "type": "integer"
          },
          "side-a": {
            "type": "integer"
          },
          "side-b": {
            "type": "integer"
          },
          "link-type": {
            "type": "string",
            "enum": [
              "copper",
              "wireless"
            ]
          },
          "side-a-iface": {
            "type": "string"
          },
          "side-b-iface": {
            "type": "string"
          }
        }
      }
    },
    "groups": {
      "type": "array",
      "items": {
        "type": "object",
        "required": [
          "id",
          "name",
          "is-display-group",
          "members"
        ],
        "properties": {
          "id": {
            "type": "integer"
          },
          "name": {
            "type": "string"
          },
          "is-display-group": {
            "type": "boolean"
          },
          "members": {
            "type": "array",
            "items": {
              "type": "integer"
            }
          }
        }
      }
    }
  }
}
